document.addEventListener("DOMContentLoaded",()=>{let t=document.querySelector(".header__mobile-btn"),a=document.querySelector(".header__nav"),n=(t&&a&&(t.addEventListener("click",()=>{var e=a.classList.toggle("header__nav--open");t.classList.toggle("header__mobile-btn--open",e),t.setAttribute("aria-expanded",e),document.body.style.overflow=e?"hidden":""}),document.addEventListener("click",e=>{!a.classList.contains("header__nav--open")||t.contains(e.target)||a.contains(e.target)||(a.classList.remove("header__nav--open"),t.classList.remove("header__mobile-btn--open"),t.setAttribute("aria-expanded","false"),document.body.style.overflow="")})),document.getElementById("counter")),o=document.getElementById("start-date");var e=document.getElementById("save-btn");let s=document.getElementById("msg-box");if(n&&o&&e){let t=e=>{var t;e&&(e=new Date(e),t=new Date,e.setHours(0,0,0,0),t.setHours(0,0,0,0),t=Math.max(0,Math.floor((t-e)/864e5)),n.innerText=t)};var r=localStorage.getItem("soberStartDate");r?(o.value=r,t(r)):((r=new Date).setDate(r.getDate()-30),r=r.toISOString().split("T")[0],o.value=r,t(r)),e.addEventListener("click",e=>{e.preventDefault();var e=o.value;e&&(localStorage.setItem("soberStartDate",e),t(e),e="断酒開始日を保存しました",s)&&(s.innerText=e,s.classList.add("c-msg--visible"),setTimeout(()=>{s.classList.remove("c-msg--visible")},2e3))})}});